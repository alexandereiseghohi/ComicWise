# Environment Variables - Staging Template
# Copy to .env.staging and fill in your staging values

# ======================
# CRITICAL - Required for Staging
# ======================

# Database - PostgreSQL (Required)
# From .env (example staging mapping)
DATABASE_URL="postgresql://<DB_USER>:<DB_PASSWORD>@<DB_HOST>:<DB_PORT>/<DB_NAME>"
# Optional: Neon-specific connection string
# NEON_DATABASE_URL="postgresql://user:password@staging-host.neon.tech:5432/database"

# Authentication (Required)
AUTH_SECRET="<REDACTED_AUTH_SECRET>"
AUTH_TRUST_HOST="true"

# Application URLs (Required)
NEXT_PUBLIC_APP_URL="https://staging.your-domain.com"

# Environment
NODE_ENV="production"

# ======================
# HIGH PRIORITY - Recommended for Staging
# ======================

# Redis/Upstash - Caching & Rate Limiting
UPSTASH_REDIS_REST_URL="<UPSTASH_REDIS_REST_URL>"
UPSTASH_REDIS_REST_TOKEN="<REDACTED_UPSTASH_TOKEN>"

# Email Service (Use test mode or separate account)
RESEND_API_KEY="<REDACTED_RESEND_API_KEY>"
EMAIL_FROM="<SENDER_EMAIL>"

# Image CDN - ImageKit (Use separate endpoint for staging)
UPLOAD_PROVIDER="imagekit"
IMAGEKIT_PUBLIC_KEY="<REDACTED_IMAGEKIT_PUBLIC_KEY>"
IMAGEKIT_PRIVATE_KEY="<REDACTED_IMAGEKIT_PRIVATE_KEY>"
IMAGEKIT_URL_ENDPOINT="<REDACTED_IMAGEKIT_URL_ENDPOINT>"
NEXT_PUBLIC_IMAGEKIT_PUBLIC_KEY="<REDACTED_IMAGEKIT_PUBLIC_KEY>"
NEXT_PUBLIC_IMAGEKIT_URL_ENDPOINT="<REDACTED_IMAGEKIT_URL_ENDPOINT>"

# Or use local for staging testing
# UPLOAD_PROVIDER="local"

# Error Monitoring - Sentry (Separate staging project)
SENTRY_DSN="<REDACTED_SENTRY_DSN>"
NEXT_PUBLIC_SENTRY_DSN="<REDACTED_NEXT_PUBLIC_SENTRY_DSN>"
SENTRY_ORG="your-org-slug"
SENTRY_PROJECT="your-staging-project-slug"
SENTRY_AUTH_TOKEN="your-staging-sentry-auth-token"
SENTRY_ENABLE_TRACING="true"
SENTRY_TRACES_SAMPLE_RATE="1.0"
SENTRY_REPLAY_SESSION_SAMPLE_RATE="1.0"
SENTRY_REPLAY_ERROR_SAMPLE_RATE="1.0"

# ======================
# OPTIONAL - OAuth Providers (Staging)
# ======================

# Google OAuth (Staging credentials)
# GOOGLE_CLIENT_ID="your-staging-google-client-id.apps.googleusercontent.com"
# GOOGLE_CLIENT_SECRET="your-staging-google-client-secret"

# GitHub OAuth (Staging credentials)
# GITHUB_CLIENT_ID="your-staging-github-client-id"
# GITHUB_CLIENT_SECRET="your-staging-github-client-secret"

# ======================
# STAGING-SPECIFIC CONFIGURATION
# ======================

# Cache Configuration (More aggressive for testing)
CACHE_ENABLED="true"
CACHE_TTL="1800"
CACHE_MAX_SIZE="50"
CACHE_PREFIX="comicwise-staging"

# Queue Configuration
QUEUE_ENABLED="false"
QUEUE_CONCURRENCY="3"
QUEUE_MAX_RETRIES="2"
QUEUE_RETRY_DELAY="3000"

# Rate Limiting (More lenient for testing)
RATE_LIMIT_ENABLED="true"
RATE_LIMIT_MAX_REQUESTS="200"
RATE_LIMIT_WINDOW_MS="60000"

# Logging (More verbose for debugging)
LOG_LEVEL="debug"
VERBOSE_LOGGING="true"
DEBUG="true"

# Theme
DEFAULT_THEME="dark"
ENABLE_THEME_SWITCHING="true"

# Monitoring & Health Checks
HEALTH_CHECK_ENABLED="true"
HEALTH_CHECK_INTERVAL="30000"
ENABLE_METRICS="true"
ENABLE_TRACING="true"

# Server
PORT="3000"

# Seed Data (Optional test password for seeding)
CUSTOM_PASSWORD="staging123"

# ======================
# STAGING ENVIRONMENT NOTES
# ======================

# 1. Use separate database instance from production
# 2. Use separate CDN endpoint/bucket to avoid conflicts
# 3. Enable more verbose logging for debugging
# 4. More lenient rate limits for testing
# 5. Higher Sentry sample rates to catch all issues
# 6. Can use test email service or catch-all inbox
# 7. Regularly reset/reseed database with fresh data
# 8. Test deployment automation and rollback procedures
# 9. Validate environment parity with production
# 10. Run full E2E test suite before promoting to prod
